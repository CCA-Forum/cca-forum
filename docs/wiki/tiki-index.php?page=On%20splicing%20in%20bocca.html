<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript">
var tiki_cookie_jar = new Array();
tiki_cookie_jar = {
	};
</script>
<script type="text/javascript" src="lib/tiki-js.js"></script>
<title>
 : On splicing in bocca
</title>




<link rel="StyleSheet"  href="styles/tikineat.css" type="text/css" />
<link rel="icon" href="favicon.png" />
    

<link rel="alternate" type="application/rss+xml" title="RSS Wiki" href="tiki-wiki_rss.php%3Fver=2" />
<link rel="alternate" type="application/rss+xml" title="RSS Blogs" href="tiki-blogs_rss.php%3Fver=2" />
<link rel="alternate" type="application/rss+xml" title="RSS Articles" href="tiki-articles_rss.php%3Fver=2" />
<link rel="alternate" type="application/rss+xml" title="RSS Image Galleries" href="tiki-image_galleries_rss.php%3Fver=2" />
<link rel="alternate" type="application/rss+xml" title="RSS File Galleries" href="tiki-file_galleries_rss.php%3Fver=2" />


<!-- 1 -->



</head>

<body
 onload=""
   class="tiki_wiki">


<div id="overDiv" style="position: absolute; visibility: hidden; z-index:1000;"></div>
<script type="text/javascript" src="lib/overlib.js"></script>
<div id="tiki-main">
    <div id="tiki-mid">
    <table id="tiki-midtbl" border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
            <td id="leftcolumn" valign="top">
            




<div class="box box-cca_menu">
<div class="box-title">CCA Wiki</div><div id="mod-cca_menu" style="display: block" class="box-data">

<div id="cca_menu" style="display:block;">

<img src="../wiki-chrome/cca-logo-trans-180.gif"/>
<span style="font-weight: bold;">CCA Software Resources</span>






<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__3'); return false">[-]</a>
	 
<a href="tiki-index.php.html" class="separator">CCA</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__3'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__3'>




<div class="option"><a href="tiki-index.php%3Fpage=CCA+documentation+and+information.html" class="linkmenu">CCA Info</a></div>




<div class="option"><a href="../mailman/listinfo.1.html" class="linkmenu">Mailing Lists</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=Working+Groups.html" class="linkmenu">Working Groups</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=Members.html" class="linkmenu">Membership & Voting</a></div>




<div class="option"><a href="../bugs.html" class="linkmenu">Issue Trackers</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__15'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage=CCA+Meetings&amp;watch_event=wiki_page_changed&amp;watch_object=CCA+Meetings.html" class="separator">Meetings</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__15'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__15'>




<div class="option"><a href="tiki-index.php%3Fpage=Upcoming+Events.html" class="linkmenu">Upcoming Events</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=SC2006+Internal.html" class="linkmenu">SC2006 Internal</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__20'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage_Ref_id=29.html" class="separator">CCA Specification</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__20'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__20'>




<div class="option"><a href="tiki-index.php%3Fpage=Specification+News.html" class="linkmenu">News</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=CCA%2520Specification%2520Development.html" class="linkmenu">Developer</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=CCARB.html" class="linkmenu">CCA Review Board</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__60'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage=Tutorial.html" class="separator">Tutorial</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__60'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__60'>




<div class="option"><a href="tiki-index.php%3Fpage=News.html" class="linkmenu">News</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=Developer.html" class="linkmenu">Developer</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__100'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage_ref_id=3.html" class="separator">CCA Tools</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__100'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__100'>




<div class="option"><a href="tiki-index.php%3Fpage=Install.html" class="linkmenu">Install</a></div>




<div class="option"><a href="tiki-view_faq.php%3FfaqId=2.html" class="linkmenu">FAQ</a></div>




<div class="option"><a href="tiki-index.php%3Fpage_ref_id=12.html" class="linkmenu">Ebuilds</a></div>




<div class="option"><a href="https://www.cca-forum.org/download/cca-tools" class="linkmenu">Download</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__150'); return false">[-]</a>
	 
<a href="../toolkit/index.html" class="separator">Toolkit</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__150'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__150'>




<div class="option"><a href="tiki-index.php%3Fpage=Bocca.html" class="linkmenu">Bocca</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=Toolkit+Tools.html" class="linkmenu">Devel Environment</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__200'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage=Ccafe.html" class="separator">Ccaffeine</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__200'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__200'>




<div class="option"><a href="tiki-index.php%3Fpage_ref_id=16.html" class="linkmenu">Install</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__300'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage_ref_id=27.html" class="separator">Babel</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__300'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__300'>




<div class="option"><a href="tiki-index.php%3Fpage=Babel+Install.html" class="linkmenu">Install</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=Babel+Patches.html" class="linkmenu">Patches</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__350'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage=CCAIN.html" class="separator">CCAIN</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__350'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__350'>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__400'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage_ref_id=28.html" class="separator">Usability</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__400'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__400'>




<div class="option"><a href="tiki-index.php%3Fpage=Coding+Camps.html" class="linkmenu">Coding Camps</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__1000'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage=Collaboration+Resources.html" class="separator">Collaboration Resources</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__1000'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__1000'>




<div class="option"><a href="tiki-index.php%3Fpage=MeetingPlace.html" class="linkmenu">MeetingPlace web sharing</a></div>




<div class="option"><a href="tiki-index.php%3Fpage=RoundupBugTracking.html" class="linkmenu">Roundup</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__1600'); return false">[-]</a>
	 
<a href="tiki-index.php%3Fpage=Computational+Quality+of+Service.html" class="separator">CQoS</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu43__1600'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu43__1600'>



</div>

<script type='text/javascript'>
      setsectionstate('menu43__3', 'e');
        setsectionstate('menu43__15', 'e');
        setsectionstate('menu43__20', 'e');
        setsectionstate('menu43__60', 'e');
        setsectionstate('menu43__100', 'e');
        setsectionstate('menu43__150', 'e');
        setsectionstate('menu43__200', 'e');
        setsectionstate('menu43__300', 'e');
        setsectionstate('menu43__350', 'e');
        setsectionstate('menu43__400', 'e');
        setsectionstate('menu43__1000', 'e');
        setsectionstate('menu43__1600', 'e');
  </script>

</div>


</div></div>
            




<div class="box box-mnu_application_menu">
<div class="box-title"><table class="box-title">
  <tr>
    <td ondblclick="javascript:icntoggle('mod-mnu_application_menu','mo.png');">
<span class="box-titletext">Menu</span>
    </td>
    <td width="11">
      <a title="Hide module contents" class="flipmodtitle" href="javascript:icntoggle('mod-mnu_application_menu','mo.png');"><img name="mod-mnu_application_menuicn" class="flipmodimage" src="img/icons/omo.png" border="0" alt="[hide]" /></a>
</td>
</tr>
</table>
</div><div id="mod-mnu_application_menu" style="display: block" class="box-data">

<div id="mnu_application_menu" style="display:block;">




<div class="option"><a href="tiki-index.php.html" class="linkmenu">Home</a></div>




<div class="option"><a href="tiki-contact.php.html" class="linkmenu">Contact us</a></div>






<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__200'); return false">[-]</a>
	 
<a href="tiki-index.php.html" class="separator">Wiki</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__200'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu42__200'>




<div class="option"><a href="tiki-index.php.html" class="linkmenu">Wiki Home</a></div>




<div class="option"><a href="tiki-lastchanges.php.html" class="linkmenu">Last Changes</a></div>




<div class="option"><a href="dump/new.tar" class="linkmenu">Dump</a></div>




<div class="option"><a href="tiki-wiki_rankings.php.html" class="linkmenu">Rankings</a></div>




<div class="option"><a href="tiki-listpages.php.html" class="linkmenu">List pages</a></div>




<div class="option"><a href="tiki-orphan_pages.php.html" class="linkmenu">Orphan pages</a></div>




<div class="option"><a href="tiki-editpage.php%3Fpage=sandbox.html" class="linkmenu">Sandbox</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__300'); return false">[-]</a>
	 
<a href="tiki-galleries.php.html" class="separator">Image Galleries</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__300'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu42__300'>




<div class="option"><a href="tiki-galleries.php.html" class="linkmenu">Galleries</a></div>




<div class="option"><a href="tiki-galleries_rankings.php.html" class="linkmenu">Rankings</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__350'); return false">[-]</a>
	 
<a href="../wiki.1.html" class="separator">Articles</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__350'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu42__350'>




<div class="option"><a href="../wiki.1.html" class="linkmenu">Articles home</a></div>




<div class="option"><a href="tiki-list_articles.php.html" class="linkmenu">List articles</a></div>




<div class="option"><a href="tiki-cms_rankings.php.html" class="linkmenu">Rankings</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__450'); return false">[-]</a>
	 
<a href="tiki-list_blogs.php.html" class="separator">Blogs</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__450'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu42__450'>




<div class="option"><a href="tiki-list_blogs.php.html" class="linkmenu">List blogs</a></div>




<div class="option"><a href="tiki-blog_rankings.php.html" class="linkmenu">Rankings</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__600'); return false">[-]</a>
	 
<a href="tiki-file_galleries.php.html" class="separator">File Galleries</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__600'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu42__600'>




<div class="option"><a href="tiki-file_galleries.php.html" class="linkmenu">List galleries</a></div>





</div>
<div class="separator">
		<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__650'); return false">[-]</a>
	 
<a href="tiki-list_faqs.php.html" class="separator">FAQs</a>
<a class='separator' href="tiki-index.php%3Fpage=On%2520splicing%2520in%2520bocca.html#" onclick="javascript:toggle('menu42__650'); return false">[+]</a> 
</div> 

<div class="menuSection" style="display:block;" id='menu42__650'>




<div class="option"><a href="tiki-list_faqs.php.html" class="linkmenu">List FAQs</a></div>



</div>

<script type='text/javascript'>
      setsectionstate('menu42__200', 'd');
        setsectionstate('menu42__300', 'd');
        setsectionstate('menu42__350', 'd');
        setsectionstate('menu42__450', 'd');
        setsectionstate('menu42__600', 'd');
        setsectionstate('menu42__650', 'd');
  </script>
























<div style="display:none">
</div>
</div>



<script type="text/javascript">
  setsectionstate('mod-mnu_application_menu','{$module_dstate}','mo.png');
</script>

</div></div>
            




<div class="box box-breadcrumb">
<div class="box-title">Recently visited pages</div><div id="mod-breadcrumb" style="display: block" class="box-data">
  <table  border="0" cellpadding="0" cellspacing="0">
          <tr><td class="module">
        <a class="linkmodule" href="tiki-index.php%3Fpage=26042007BoccaAgenda.html">
                      26042007BoccaAgenda
                  </a>
      </td></tr>
          <tr><td class="module">
        <a class="linkmodule" href="tiki-index.php%3Fpage=17052007BoccaAgenda.html">
                      17052007BoccaAgenda
                  </a>
      </td></tr>
          <tr><td class="module">
        <a class="linkmodule" href="tiki-index.php%3Fpage=30072007Bocca.html">
                      30072007Bocca
                  </a>
      </td></tr>
          <tr><td class="module">
        <a class="linkmodule" href="tiki-index.php%3Fpage=BoccaSnapshotUpgrade.html">
                      BoccaSnapshotUpgrade
                  </a>
      </td></tr>
          <tr><td class="module">
        <a class="linkmodule" href="tiki-index.php%3Fpage=Building%2520CCA%2520Tools%2520on%2520the%2520Cray%2520XT.html">
                      Building CCA Tools on the Cray XT
                  </a>
      </td></tr>
      </table>


</div></div>
            

<!-- no perm -->

                      </td>
            <td width="100%" id="centercolumn" valign="top"><div id="tiki-center">
      
            


<h1><a class="pagetitle" title="refresh" accesskey="2" href="tiki-index.php%3Fpage=On+splicing+in+bocca.html">On splicing in bocca</a></h1>

<div class="wikitopline">
<table><tr>
<td style="vertical-align:top;">
<div id="description">Splicing in bocca</div>
</td>
	<td style="text-align:right;width:142px;wrap:nowrap">
	       
				<a title="print" href="tiki-print.php%3Fpage=On%2520splicing%2520in%2520bocca.html"><img src="img/icons/ico_print.gif" border="0"  width="16" height="16" alt="print" /></a>
	
			<a title="create PDF" href="tiki-config_pdf.php%3Fpage=On%2520splicing%2520in%2520bocca.html"><img src="img/icons/ico_pdf.gif" border="0"  width="16" height="16" alt="PDF" /></a>
				</td>

			<td style="text-align:right;width:42px;">
		<form action="tiki-index.php.html" method="get">
		<select name="page" onchange="page.form.submit()">
		<option>backlinks...</option>
				<option value="Toolkit Tools Discussion">Toolkit Tools Discussion</option>
				</select>
		</form>
		</td>
	
	
	
</tr></table>
</div>

<div class="wikitext">
<div class="titlebar"> The short version </div>
<br />
<ul><li> Bocca will only rewrite in impls the bocca protected blocks.
</li><li> Bocca will only generate non-protected code at component create.
</li><li> Bocca will *always* rewrite the bocca protected blocks (not sometimes) unless told not to.
</li><li> When more than one bocca block goes into a single babel block at generation, each must have clear prefix or suffix position in the splicer block and the tag is the tag on the block + :prolog or :epilog.
</li><li> No bocca code goes in _misc.
</li><li> No unconditional bocca native code goes in _include unless it is to include language standard headers. corollary: boccaSetServices and boccaForceUsePortInclude must appear in sidl.
</li><li> Bocca macro code is allowed in _include; the BOCCA_ prefix is always used.
</li><li> If the user deletes a bocca protected block entirely, it <b>will not be</b> reinserted-- the user gets what they deserve. If they want it back, they can insert the empty delimiters and then have bocca update all protected blocks by adding and removing a dummy port.
</li></ul>
<br />
<div class="titlebar"> The long version </div>
<br />
Bocca understands babel splicer blocks and leverages those conventions as much as possible to manage bocca-generated code inside those blocks while never stepping on user-written code. This note is primarily for the users to understand the lengths we go to to preserve their code and for the developers to gain a common understanding of how splicing is handled in the bocca implementation.<br />
<br />
<b>Background</b><br />
<ul><li> Babel blocks are delimited DO-NOT-DELETE splicer.begin/end(tag).
</li><li> Bocca generated blocks are delimited bocca.protected.begin/end(tag).
</li><li> User-written blocks in bocca-generated files (only sidl currently) are delimited DO-NOT-DELETE bocca.splicer.begin/end(tag).
</li></ul>
<br />
To generalize the above delimiters, they consist of a tag in parentheses and a leading key string that is always followed by .begin(tag) or .end(tag). The key string examples here would be &quot;DO-NOT-DELETE splicer&quot;, &quot;bocca.protected&quot;, and &quot;DO-NOT-DELETE bocca.splicer&quot;. Delimited block tags are always well-nested; ill-nested blocks cause splicers to generate errors and cancel any overwrites that would occur in a successful splicing.<br />
Summary: KEY.begin(TAG)/KEY.end(TAG) is the delimiter pair.<br />
<br />
<b>Handling SIDL</b><br />
<br />
<ul><li> Bocca generates SIDL package/class/interface/CCA Port declarations but leaves the methods within them to the user to write. The user puts their interface code in a bocca.splicer block.
</li><li> Bocca generates a SIDL CCA component declaration leaving a user block in the sidl but also including some bocca-related methods outside the user block.
</li></ul>
<br />
<b>Handling Impl files</b><br />
<br />
Bocca must handle a component's impl files when a component is created and any time the bocca-information is changed, such as when a new CCA port is added to update the bocca-generated methods.<br />
<br />
Most of the Babel splicer blocks in a Component implementation file are application-related methods that only the component writer knows how to implement. Bocca does not touch these methods at all. Bocca can (and normally does) generate default implementations for methods of the CCA interfaces gov.cca.Component, gov.cca.ComponentRelease, gov.cca.ports.GoPort (at the user's request) and portions of the component's private data. Bocca does not claim ownership of any method normally required by babel or cca specifications; bocca merely provides suggested implementations that the user may edit or discard.<br />
<br />
<b>Invoking the splicer to keep users happy</b><br />
<br />
The bocca splicer is almost always be invoked with <i>identical</i> keys for source and target if replacement is intended and <i>distinct</i> keys if insertion is intended. In normal operations (generate a component, update a component for new ports) only the identical keys case is needed.<br />
<div class="simplebox">For initial definition of a method or methods, both keys are &quot;DO-NOT-DELETE splicer&quot;; for subsequent rewrite of the bocca-owned sections only, both keys are &quot;bocca.protected&quot;.</div><br />
When the tags match, the source block will be inserted (or appended if insertFirst=True is not passed).<br />
To handle multiple bocca.protected in a single Babel splicer block, simply splice to the same target.<br />
<br />
To handle multiple bocca tags inside a single bocca block, note that this requires no reference to a babel splicer key at all. Simply use extended bocca protected keys. In an example suited to setServices<br />
<div class="simplebox">targetKey=&quot;DO-NOT-DELETE bocca.protected&quot;, sourceKey=&quot;DO-NOT-DELETE bocca.protected.port&quot;</div><br />
<br />
In any operation in which any user code might be replaced, rejectSave=True should be passed and the .rej file generated should be put in the appropriate Trash directory and a warning issued about where old code can be found.<br />
There are no such operations currently.<br />
<br />
<b>Algorithms</b><br />
<br />
We distinguish for clarity (not because they are unique) several cases and explain what happens with splicing in each:<br />
<br />
<ul><li> A new component is defined in bocca.
</li></ul>
<div class="simplebox">The sidl is generated.<br />
From sidl the impl is generated with babel.<br />
The bocca generates and inserts the setServices method default block and protected auxiliary function splices.<br />
The generated auxiliaries contain bocca.protected keyed splices which the user should never edit.<br />
The user can insert code in the cca standard-specified functions and their code will never be molested (1). If the user removes calls to the cca auxilary methods,  they must provide alternative equivalent functionality.<br />
</div><br />
<br />
<ul><li> An existing component is changed, e.g. a uses port is added.
</li></ul>
<div class="simplebox">The sidl file is regenerated, leaving user additions to the component inside the bocca.splicer block unchanged.<br />
The bocca.protected blocks for the component are regenerated and replaced, given the new information.<br />
If the user has <i>manually deleted</i> one of the bocca.protected blocks, it <b>will not be reinserted</b> unless the user inserts at least the needed delimiters.<br />
If the user simply deletes the bocca.protected delimiters around a bocca code block, this has the effect of freezing that code in spite of any future changes bocca normally manages;<br />
the generated code has been promoted to user code.<br />
</div><br />
<br />
<ul><li> A bocca component is created based on an existing component implementation.
</li></ul>
<div class="simplebox"> The user's sidl description of the component is copied into the bocca project.<br />
The original sidl file (outside the bocca project) is never again referenced.<br />
If there is also an impl file or files, they are:<br />
<tt> used as the source for a second splicing after the initial bocca impl generation.</tt><br />
<tt> The default bocca code for setServices and go() is inserted unless suppressed by using</tt><br />
<tt>   --import-impl-exact --exclude-impl-symbols=None.</tt><br />
</div><br />
<br />
Special cases of code changes outside bocca.protected splicers:<br />
<br />
<ul><li> (1) An existing port instance is renamed (future feature)
</li></ul>
<div class="simplebox"> All the CCA-related calls in the impl file which use the old port instance name<br />
as a literal string (e.g. &quot;myport&quot;) will be replaced with string literals of the<br />
new port instance name. <i><b>This is independent of where the literals are located</b></i>.<br />
Both user code and bocca-generated code will be updated with the new port name, but only in<br />
the CCA functions handling port instance names.<br />
If the port instance name is somehow computed instead of specified as a literal, manual<br />
repairs may be needed when a port instance name is changed.</div><br />
<br />
<ul><li> (2) Babel default exceptions
</li></ul>
<div class="simplebox">A babel default &quot;not implemented exception&quot; throw is always deleted when<br />
the bocca splicer inserts code to an unimplemented setServices or other bocca-managed function.<br />
Default exceptions are left in place by bocca in all other functions.<br />
</div><br />
<br />
<b>Splicing for power users</b><br />
<ul><li> Users may want to splice or to extract splices from their own files. The splicer in bocca has a powerful python programming interface but is also accessible from the command line in the form of an extractor (bocca-extract) and splicer (bocca-merge). Either command responds to the --help switch with further information. There are many options to fine tune, replicating on the command line most of the functionality available in the programming interface.
</li><li> Users are warned against any component maintenance model which uses both bocca and a collection of individual splice files to generate the final components to be compiled. Bocca is not designed for use in such models and sooner or later a splicing conflict will occur and will be fiendishly hard to debug.
</li><li> The bocca-merge tool can be used independent of any bocca project to aid the renaming of a component implementation from one package and/or class name into another. Specifically it will migrate blocks from the old impl file into the new impl file generated from sidl where the names have been changed. Previously this kind of rename had to be done by hand or by custom written string substitution scripts.
</li></ul>

</div> 


<p class="editdate">
  Created by: <a class='link'  target='_top' href='tiki-user_information.php%3Fview_user=baallan.html' >baallan</a>
  last modification: Friday 21 of September, 2007 [06:44:59 UTC] by <a class='link'  target='_top' href='tiki-user_information.php%3Fview_user=baallan.html' >baallan</a>
</p>



      
            

<hr/>
<div id="page-bar">
  <table>
    <tr>


    



<td><div class="button2"><a href="tiki-likepages.php%3Fpage=On%2520splicing%2520in%2520bocca.html" class="linkbut">similar</a></div></td>



 

  
  
  

    
  
</tr>
</table>
</div>



<a name="attachments"></a>

<div id="attzone">







</div>



    <a name="comments"></a>
    	<div id="comzone">
    

  

    

	



    </div><!-- comzone end -->
            </div>
      </td>
            <td id="rightcolumn" valign="top">
            



<div class="box box-login_box">
<div class="box-title">Login</div><div id="mod-login_box" style="display: block" class="box-data">

         <form name="loginbox" action="https://www.cca-forum.org/wiki/tiki-login.php" method="post" > 
           <table border="0">
      <tr>
        <td>
          <table>
          <tr><td class="module"><label for="login-user">user:</label></td></tr>
		          <tr><td><input type="text" name="user" id="login-user" size="20" /></td></tr>
		                    <tr><td class="module"><label for="login-pass">pass:</label></td></tr>
          <tr><td><input type="password" name="pass" id="login-pass" size="20" /></td></tr>
          <tr><td><input type="submit" name="login" value="login" /></td></tr>
                    <tr>
                      <td  class="module" valign="bottom">[ <a class="linkmodule" href="tiki-register.php.html" title="Click here to register">register</a> | <a class="linkmodule" href="tiki-remind_password.php.html" title="Click here if you've forgotten your password">I forgot my password</a> ]</td>
                                                  </tr>
                              </table>
        </td>
      </tr>
      </table>

              <input type="hidden" name="stay_in_ssl_mode" value="" />
      			      </form>
    

</div></div>
            




<div class="box box-who_is_there">
<div class="box-title">Online users</div><div id="mod-who_is_there" style="display: block" class="box-data">
<div>
6 
online users
</div>


</div></div>
                      </td>
          </tr>
    </table>
  </div>
  </div>

</body>
</html>  